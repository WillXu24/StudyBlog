趁着最近在学习golang，顺带把博客框架换为了基于golang开发的[hugo](https://gohugo.io/)，还顺带做了以下优化，总的来说有以下的特性：

- 快
- 简单
- 多端管理

<!--more-->

### 环境搭建

确保你已经安装且配置好git，若没有，请出门右转[廖雪峰的git教程](https://www.liaoxuefeng.com/wiki/896043488029600)

之后强烈推荐你也安装[vscode](https://code.visualstudio.com/)

好的，那么接下来就是正题

#### 安装hugo

BB两句：时下主流的博客框架hexo基于node.js开发，需要依赖于其环境方能运行，而且要实现一些主题额外功能还需要下载匹配各种依赖，相比之下的hugo基于golang开发，打包成独立文件，不需要其他任何的环境，只要下载好hugo并添加好系统变量，就能直接运行，可以说是相当之便利和快捷了。

方法一：在[github仓库](https://github.com/gohugoio/hugo/releases)下载对应的压缩包解压并配置好系统变量

方法二：安装好自己的包管理工具，然后通过包管理工具直接安装

安装好后运行`hugo version`来检测是否成功。

```bash
[user@Manjaro ~]$ hugo version
Hugo Static Site Generator v0.55.6/extended linux/amd64 BuildDate: unknown #成功返回版本号
```

#### 开始建站

在你的目标文件夹下运行`hugo new site [name]`来快速创建网站的本地文件夹`[name]`，本地文件夹包含网站的所有内容

```bash
[user@Manjaro ~]$ hugo new site test
Congratulations! Your new Hugo site is created in /home/willxu/test. #成功创建网站目录

Just a few more steps and you're ready to go:

1. Download a theme into the same-named folder.
   Choose a theme from https://themes.gohugo.io/, or
   create your own with the "hugo new theme <THEMENAME>" command.
2. Perhaps you want to add some content. You can add single files
   with "hugo new <SECTIONNAME>/<FILENAME>.<FORMAT>".
3. Start the built-in live server via "hugo server".

Visit https://gohugo.io/ for quickstart guide and full documentation.
```

文件夹构成

```tree
.
├── archetypes
│   └── default.md
├── config.toml
├── content
├── data
├── layouts
├── static
└── themes

6 directories, 2 files
```

#### 下载主题

上一步可以看到，快速创建后的第一步就是下载一个主题到你的网站目录的同名文件夹themes里

在这里我选择even主题，那么在网站根目录下执行

```bash
[user@Manjaro test]$ git clone git@github.com:olOwOlo/hugo-theme-even.git themes/even
正克隆到 'themes/even'...
remote: Enumerating objects: 1441, done.
remote: Total 1441 (delta 0), reused 0 (delta 0), pack-reused 1441
接收对象中: 100% (1441/1441), 1.66 MiB | 49.00 KiB/s, 完成.
处理 delta 中: 100% (850/850), 完成.
```

我们再来看看文件夹构成

```
.
├── archetypes
│   └── default.md
├── config.toml
├── content
├── data
├── layouts
├── static
└── themes
    └── even
        ├── archetypes
        ├── CHANGELOG.md
        ├── data
        ├── exampleSite
        ├── i18n
        ├── images
        ├── layouts
        ├── LICENSE.md
        ├── package.json
        ├── postcss.config.js
        ├── README.md
        ├── README-zh.md
        ├── src
        ├── static
        ├── theme.toml
        ├── webpack.config.js
        └── yarn.lock
```

再将主题目录下的exampleSite文件夹复制到根目录下覆盖本地文件夹，然后构成如下

```
.
├── archetypes
│   └── default.md
├── config.toml
├── content
│   ├── about.md
│   └── post
│       ├── chinese-preview.md
│       ├── english-preview.md
│       ├── even-preview.md
│       ├── hidden-post.md
│       ├── japanese-preview.md
│       ├── js-flowchart-diagrams.md
│       ├── js-sequence-diagrams.md
│       ├── shortcodes.md
│       └── syntax-highlighting.md
├── data
├── layouts
├── resources
│   └── _gen
│       ├── assets
│       └── images
├── static
└── themes
    └── even
        ├── archetypes
        ├── CHANGELOG.md
        ├── data
        ├── exampleSite
        ├── i18n
        ├── images
        ├── layouts
        ├── LICENSE.md
        ├── package.json
        ├── postcss.config.js
        ├── README.md
        ├── README-zh.md
        ├── src
        ├── static
        ├── theme.toml
        ├── webpack.config.js
        └── yarn.lock

20 directories, 21 files

```



#### 测试运行

本地测试运行`hugo serve`

```bash
[willxu@Manjaro test]$ hugo serve
Building sites … WARN 2019/07/27 15:10:56 Page's .Hugo is deprecated and will be removed in a future release. Use the global hugo function.
WARN 2019/07/27 15:10:56 Page's .RSSLink is deprecated and will be removed in a future release. Use the Output Format's link, e.g. something like: 
    {{ with .OutputFormats.Get "RSS" }}{{ .RelPermalink }}{{ end }}.
WARN 2019/07/27 15:10:56 Page's .URL is deprecated and will be removed in a future release. Use .Permalink or .RelPermalink. If what you want is the front matter URL value, use .Params.url.

                   | EN  
+------------------+----+
  Pages            | 60  
  Paginator pages  |  2  
  Non-page files   |  0  
  Static files     | 40  
  Processed images |  0  
  Aliases          | 22  
  Sitemaps         |  1  
  Cleaned          |  0  

Total in 434 ms
Watching for changes in /home/willxu/test/{content,data,layouts,static,themes}
Watching for config changes in /home/willxu/test/config.toml
Environment: "development"
Serving pages from memory
Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender
Web Server is available at http://localhost:1313/ (bind address 127.0.0.1)
Press Ctrl+C to stop
```

访问http://localhost:1313/查看预览界面，是不是很快！

可以试试更改配置文件或者post目录下的博客文件，网站会实时刷新的哦！

### 博客配置

#### 主题配置

hugo的主题相比于hexo来说少了很多，不过也有许多搬运更改于hexo的主题，比如我选择的这款even就是搬运于hexo主题，基本上就是按照官方的README走的流程，换了icon图标以及配色，详情可以移步[**hugo-theme-even**](https://github.com/olOwOlo/hugo-theme-even)。

#### 多端管理

**敲黑板，划重点！**

这个其实在github博客全系列都可以使用，包括hexo、hugo等等，之前在hexo的时候，在一台电脑上配置好环境，写好博客，上传之后也只有public文件夹上传并部署，其余的工程文件都在本地，想要在其他终端进行博客的编辑并实时发布变成了一种困难，所以最近学习了这样的一个策略：

- 两个仓库分别管理，一个存放博客的整个工程文件夹，另一个用于存放博客发布的内容。
- 上传只要上传本地博客文件夹，然后通过Travis CI设置触发识别仓库更改并发布到博客发布的仓库
- 如果更换终端，只需要下载hugo，pull仓库到本地就可以直接进行无差别编辑发布！

一、准备两个仓库

- 仓库A：命名随意，用于存放整个工程文件
- 仓库B：命名格式`<username>.github.io`，用于博客的发布，将来的访问地址：https://<username>.github.io

二、生成许可TOKEN

到github的[token生成处](https://github.com/settings/tokens/new)生成新token，注意选择 `public_repo`的权限

![2019-07-27 15-41-21 的屏幕截图.png](https://i.loli.net/2019/07/27/5d3c00319ab3512709.png)

三、链接两个仓库

到[Travis CI](https://travis-ci.org/)绑定你的github账户并激活仓库A

![2019-07-27 15-52-05 的屏幕截图.png](https://i.loli.net/2019/07/27/5d3c02b92281d66977.png)

在设置中填入你的token

![QQ截图20190727155537.png](https://i.loli.net/2019/07/27/5d3c038ba767436590.png)

四、本地文件配置

本地文件夹新建`.travis.yml`文件并写入以下内容：

```yml
sudo: false
language: go
git:
    depth: 1
install: go get -v github.com/gohugoio/hugo
script: hugo
deploy:
    provider: pages
    skip_cleanup: true
    github_token: <$+上一步Travis CI设置里的tokon名，例如 $token>
    on:
        branch: master
    local_dir: public
    repo: <username>/<username>.github.io
    fqdn: <custom-domain-if-needed>
    target_branch: master
    email: <github-email>
    name: <github-username>
```

本地文件夹中的`config.toml`中的`baseURL`设置为`https://<username>.github.io`

五、将本地文件夹push到仓库A，等三分钟左右查看是否成功部署到仓库B，并且正常访问网站

### 参考文档

[Hugo 从入门到会用](https://blog.olowolo.com/post/hugo-quick-start/)

[使用 Hugo 搭建博客](https://segmentfault.com/a/1190000012975914)